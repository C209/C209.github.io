---
title: 博客搭建
categories: 杂项
---
# 写在前面
本文讨论使用GitHub Pages作为博客页，使用markdown作为博客的记录形式，利用hexo来完成相应的生成工作。

## GitHub Pages的组织逻辑
GitHub Pages有两种组织形式：  
- 个人主页: 对应repo为{UserName}.github.io的master分支
- 项目主页: 对应各个repo下的gh-pages分支。

本文暂且只讨论个人主页的搭建。

# 创建git repo
在GitHub上新建一个repo，名称为UserName.github.io，其中UserName为你的GitHub用户名。  
这个repo的master分支就用来作为博客的页面存储了。

# hexo相关的环境准备
## 1. 安装Node.js
[下载地址在这里](https://nodejs.org/en/download/)，安装完成后在控制台中输入以下命令来检查是否成功：
```
node -v
npm -v
```

## 2. 安装hexo
使用npm进行安装:
```
npm install -g hexo-cli 
```

# 创建本地博客项目
## 1. 初始化博客目录
在你想要创建项目的地方，使用以下指令初始化一个指定名称的博客目录：
```
hexo init MyBlog
```
其中MyBlog为创建的博客目录名，可以任意指定。

## 2. 安装Git部署插件
稍后执行部署的时候，需要告诉hexo将博客部署到哪里，这里我们希望将其部署至GitHub仓库。所以使用以下指令进行安装:
```
npm install hexo-deployer-git --save
```

## 3. 修改一些配置
我们需要对配置文件(MyBlog/_config.yml)进行一些修改。

首先配置一下博客页的标题、作者、语言、时区等信息：
```
# Site
title: C209's Blog
subtitle: ''
description: ''
keywords:
author: C209
language: 
- zh-CN
- zh-TW
- en
timezone: Asia/Shanghai
```

接着是最底下的deploy信息：
```
# Deployment
## Docs: https://hexo.io/docs/one-command-deployment
deploy:
  type: git
  repo: https://github.com/UserName/UserName.github.io.git
  branch: master
```
其中UserName为你的GitHub用户名。

# 将博客项目存储至repo
至此为止，MyBlog目录下的文件其实都是只在本地的，之后hexo执行部署时并不会将它们也推送上去（这其中也包括source/_posts下的md源文件）。假如以后想要换个机器接着写博客的话，这些东西丢了还是很麻烦的。所以希望利用这个repo也将这些内容一并存储起来，之后只需要在别处把项目clone下来，就可以继续写博客了。对这个不感兴趣的话，本步骤可以跳过。

## 1. 将博客项目关联至repo
在MyBlog目录下，执行以下命令:
```
git init
git remote add origin https://github.com/UserName/UserName.github.io
```
其中UserName为你的GitHub用户名。

## 2. 创建并推送至新的分支
使用以下命令将当前博客项目中的文件推送至新建的source分支:
```
 git checkout -b source
 git add .
 git commit -m 'add source'
 git push origin source
```

之后在其他机器上，只需要clone这个repo并切换至source分支，并利用之前步骤的指令完成hexo相关的环境准备即可。md的编写和提交也直接在source分支上进行。

# 安装主题
可以找一个自己喜欢的主题，这里以[next](https://github.com/theme-next/hexo-theme-next)为例。

## 1. 下载主题
在MyBlog下执行以下指令即可：
```
git clone https://github.com/theme-next/hexo-theme-next themes/next
```

如果有参考之前的步骤，将博客项目提交至source分支的话，这里也可以将该主题直接作为我们自己repo的一个submodule，这样比较简洁清晰。这一步纯粹看个人喜好。

## 2. 在配置中启用主题
依旧修改配置文件(MyBlog/_config.yml):
```
# Extensions
## Plugins: https://hexo.io/plugins/
## Themes: https://hexo.io/themes/
theme: next
```

# 编写博客
在source/_posts下，编写markdown作为博客源文件，也可以使用hexo n "NewBlog"指令为你新建一篇md。hexo在这里已经为我们创建了一个hello-world作为模板。

博客的开头可以附加例如标题、时间等信息，例如：
```
---
title:     // 文章标题
date:   // 创建日期
updated:  // 更新日期
tags:    
   - a
   - b   // 标签
categories: 
   - a
   - b  // 分类
keywords:  // 关键字
---
```

# 测试并部署
## 1. 使用hexo进行生成
使用以下指令完成生成工作：
```
hexo g
```

## 2. 测试
使用以下指令开启本地测试：
```
hexo s
```
此时在浏览器中输入localhost:4000可以预览博客页面效果。

## 3. 部署
使用以下指令将生成的博客部署至master分支：
```
hexo d
```
至此，刚刚创建的博客已经完成部署和发布工作，可以至 https://UserName.github.io 页面浏览实际的博客页面，其中UserName为你的GitHub用户名。

# TroubleShooting
## hexo d部署授权失败
执行hexo d指令时，出现下述错误：
```
Support for password authentication was removed on August 13, 2021. Please use a personal access token instead.
```
需要改为使用Token的方式，具体参考[这篇博客](https://blog.csdn.net/weixin_41010198/article/details/119698015)即可，这里就不详述了。

# 参考资料
- [官方文档](https://hexo.io/zh-cn/docs/)
- [GitHub+Hexo 搭建个人网站详细教程](https://zhuanlan.zhihu.com/p/26625249)
- [Github Pages+Hexo 博客搭建](https://imzlp.com/posts/58952/)
- [使用github搭建Markdown博客系统](https://blog.csdn.net/zyxhangiian123456789/article/details/101797464)
- [多台电脑使用Hexo](https://www.jianshu.com/p/4bcf2848b3fc)
- [如何用Github的gh-pages分支展示自己的项目](https://www.cnblogs.com/MuYunyun/p/6082359.html)
- [Hexo使用、Markdown语法笔记](https://www.jianshu.com/p/9a9b35c819c3)
